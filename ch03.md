# De Stageopdracht

## Wat ga ik doen?
<a>Logius</a> beheert een aantal standaarden die effectieve en veilige gegevensuitwisseling mogelijk maken tussen 
overheden onderling en tussen overheden, burgers en bedrijven. De afdeling standaarden draagt bij aan de kwaliteit van 
dat beheer en bevordert zowel standaardisatie als het juiste gebruik van open standaarden. Als documentatietool wordt 
gebruik gemaakt van <a>ReSpec</a>, een tool om technische documentatie op basis van Markdown te genereren. <a>Logius</a> 
heeft hiervoor een eigen <a>profiel</a> ontwikkeld. Zie  https://publicatie.centrumvoorstandaarden.nl/ 
en https://github.com/Logius-standaarden/respec voor meer informatie over onze <a>profiel</a>en.
In deze stage ga ik me bezighouden met het verder ontwikkelen van dit <a>profiel</a> om het ook bruikbaar te maken voor andere 
overheidsorganisaties. Onderdeel van de opdracht is het door ontwikkelen en onderhouden van de JavaScript Code, het 
uitbreiden van de functionaliteit en het ondersteunen van de community met voorbeelden en uitleg.

## Kern van de opdracht
In deze stage ga ik me bezighouden met het verder ontwikkelen van het <a>ReSpec</a> <a>profiel</a> om het ook bruikbaar te 
maken voor andere overheidsorganisaties.
In het huidige <a>profiel</a> zijn parameters niet of beperkt instelbaar, Bedoeling is dat het profiel configureerbaar wordt 
zodat andere overheidsorganisaties eenvoudig een eigen <a>profiel</a> kunnen maken voor hun technische 
specificaties / documentatie.
Onderdeel van de opdracht is het door ontwikkelen en onderhouden van de JavaScript Code, het uitbreiden van de 
functionaliteit (bv het bijblijven met de ontwikkelingen in de w3c versie, en automatische controles) en het 
ondersteunen van de community met voorbeelden en uitleg.
Voorbeeld van een <a>ReSpec</a> document opgemaakt met het Logius-<a>profiel</a>:
[Digikoppeling Koppelvlakstandaard REST-API 1.0.0 (centrumvoorstandaarden.nl)](https://publicatie.centrumvoorstandaarden.nl/dk/restapi/)

## Enkele Relevante links
- [ReSpec Documentation](https://respec.org/docs/)  
- [Home · w3c/respec Wiki (github.com)](https://github.com/w3c/respec/wiki)  
- [Logius-standaarden/respec: A tool for creating technical documents and web standards (GitHub.com)](https://github.com/Logius-standaarden/respec)  
- [Issues · Logius-standaarden/ReSpec-template (github.com)](https://github.com/Logius-standaarden/ReSpec-template/issues?q=is%3Aissue+is%3Aclosed) (S. Gort issues bij werken met <a>Logius</a> <a>profiel</a> voor legitimaat versie)  
- [overdrachtsdocument voormalig collega](https://publicatie.centrumvoorstandaarden.nl/hidden-code-03031928/#publicatie-van-standaard-specificaties)

## Aanpak
### Introductie ontwikkelproces
In het begin moet de ontwikkelomgeving opgezet worden, de huidige en gewilde functionaliteit in kaart gebracht worden. 
Om een goed beeld te krijgen van de user experience zal ik het Logius-ReSpec-profiel gebruiken om dit document 
te realiseren.
Het <a>profiel</a> is open-source en samenwerking is belangrijk. 
Daarom zal ik als er verbeteringen zijn die ik door wil voeren, eerst
een feature request doen op github zodat alle betrokken partijen de kans
hebben om hun mening te delen.
Aan de hand van de goedgekeurde features kan ik een nieuwe branches 
aanmaken. In die branches kan ik dan de gewilde features gaan realiseren.
Na het testen of een nieuwe feature naar behoren werkt kan er een pull-request 
gedaan worden. Als die goedgekeurd word zal het <a>profiel</a> de nieuwe feature
hebben. Nu kan er verder gewerkt worden aan nieuwe features.

### Begin status codebase
Het project is begonnen met de standaard codebase van <a>ReSpec</a>. [Geonovum](https://www.geonovum.nl/) heeft hierop 
een <a>profiel</a> gebouwd voor het schrijven van hun documentatie. Daarna heeft <a>Logius</a> een eigen <a>profiel</a>
gemaakt op die van Geonovum.  

<a>ReSpec</a> is origineel vooral gefocust om het schrijven van documentatie met HTML. De <a>profiel</a>en van Geonovum 
en <a>Logius</a> zijn gefocust op [Markdown](https://www.markdownguide.org/basic-syntax/) voor het schrijven van de 
documentatie omdat markdown makkelijker in gebruik is.

Er zijn ook al enkele testen ingebouwd voor het controleren of het document wel toegankelijk is.

Er zijn echter nog veel functionaliteiten hardcoded. Er is een config file die erg bloated is en niet erg makkelijk in 
gebruik zonder achterliggende kennis in de werking van het <a>profiel</a>.

### Tools, languages & frameworks
- [Github](https://github.com/)
- [Git](https://git-scm.com/)
- [Webstorm](https://www.jetbrains.com/webstorm/)
- [JavaScript](https://nl.wikipedia.org/wiki/JavaScript)
- [NodeJS](https://nodejs.org/en/about/)
- [ReSpec](https://respec.org/docs/)
- [Mermaid](https://mermaid-js.github.io/mermaid/#/)

### Definition of done
WIP

### Mijn ervaring
WIP

## Aanpassingen en redenatie
### Dynamische side label
#### Oud
Ieder document gemaakt met het <a>Logius</a> <a>profiel</a> heeft een label aan de linkerbovenhoek van het document. 
Dit label bevat de organisatienaam en huidige status van het document, de kleur van het label is gerelateerd aan de 
status van het document.

In de originele versie van het profiel word er aan de hand van een aantal config opties een cijfercode gemaakt. Aan de 
hand van die code word een stukje CSS geladen die een SVG-file toevoegt aan het document. Het probleem met dit systeem
was dat er in de code, maar ruimte was voor 9 opties per digit. Verder moest er voor iedere optie handmatig een nieuwe
SVG gemaakt worden. Het uitbreiden van de opties was dus gelimiteerd aan 9 opties en kosten extra handwerk voor iedere
optie die je toe wil voegen.

#### Nieuw
Om deze problemen op te lossen is de side label nu dynamisch, het label word gegenereerd met data uit de config file.
Het aanpassen van het label is nu makkelijk omdat je nu alleen de config file hoeft aan te passen. Ook is het label
nu niet meer gelimiteerd door de 9 opties uit het oude systeem.

### Gesplitste config files
#### Oud
Om <a>ReSpec</a> te kunnen configureren heeft het project standaard een config file. Deze file bevat informatie over
de organisatie, statuscodes, status van het document en visuele settings.

Deze file voelt alleen erg bloated omdat er verschillende type config opties in hetzelfde document zitten. Verder worden 
bepaalde config opties zoals organisatienaam en statuscodes constant hergebruikt binnen een organisatie. In het oude 
systeem moeten die opties dus constant opnieuw ingesteld worden als er een nieuw document gemaakt word.

#### Nieuw
In het nieuwe systeem is de originele file opgesplitst in verschillende files die hun eigen functionaliteit hebben. Nu 
kunnen er oneindig nieuwe config files toegevoegd worden. Nieuwere files kunnen opties uit oude files overschrijven wat 
betekend dat uitzonderingsgevallen altijd nog bijgewerkt kunnen worden. Verder kunnen de niet veranderende config files
(zoals organisatie data bijvoorbeeld) publiek gehost worden en dan in een document gebruikt worden. Dit betekent dat
als er globale data verandert niet alle documenten 1 voor 1 doorgelopen hoeven worden en handmatig aangepast worden.

